@{
    Layout = "";

    var Modulo = ViewContext.RouteData.Values["controller"].ToString() + "/" + ViewContext.RouteData.Values["action"].ToString();
}

<!doctype html>
<html lang="en" ng-app="mdDatetimePickerDemo">
<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png" />
    <link rel="icon" type="image/png" href="../assets/img/favicon.png" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Material Dashboard by Creative Tim</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    <link rel="stylesheet" href="~/Content/styles.css" />

    @Styles.Render("~/Content/doctorStyles/css")

    @if (Modulo == "Paciente/Confirma")
    {
        <link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel='stylesheet' type='text/css'>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/github.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/angular-material/1.0.0-rc3/angular-material.min.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="../../Content/material-datetimepicker.min.css" type="text/css" />
    }

    @if (Modulo == "MedicoConsultorios/MedicosVisitados" ||
         Modulo == "MedicoConsultorios/MedicosFavoritos")  {
        <link href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css" rel='stylesheet' type='text/css'>
    }



    <!--     Fonts and icons     -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,700,300|Material+Icons' rel='stylesheet' type='text/css'>

</head>

<body ng-controller='DemoCtrl'>
    <div id="myModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="inbox-body">

                </div>
            </div>
        </div>
    </div>

    <div class="wrapper">
        <div class="sidebar" data-color="purple" data-image="../../Content/images/sidebar-1.jpg">
            <!--
                Tip 1: You can change the color of the sidebar using: data-color="purple | blue | green | orange | red"

                Tip 2: you can also add an image using data-image tag
            -->
            <div class="logo">
                <a href="/Paciente/Dashboard" class="simple-text">
                    Dr. Med
                </a>
            </div>
            <div class="sidebar-wrapper">
                <ul class="nav">

                    @if (Modulo == "Paciente/Dashboard")
                    {
                        @Html.Raw("<li class=\"active\">");
                    }
                    else { @Html.Raw("<li>");
                    }

                    <a href="/Paciente/Dashboard">
                        <i class="material-icons">dashboard</i>
                        <p>Dashboard</p>
                    </a>

                    @Html.Raw("</li>")

                    @if (Modulo == "Paciente/Edit")
                    {
                        @Html.Raw("<li class=\"active\">");
                    }
                    else { @Html.Raw("<li>");
                    }

                    <a href="/Paciente/Edit/">
                        <i class="material-icons">person</i>
                        <p>Perfil</p>
                    </a>

                    @Html.Raw("</li>")

                    @if (Modulo == "MedicoConsultorios/MedicosVisitados")
                    {
                        @Html.Raw("<li class=\"active\">");
                    }
                    else {@Html.Raw("<li>");
                    }

                    <a href="/MedicoConsultorios/MedicosVisitados">
                        <i class="material-icons">content_paste</i>
                        <p>Médicos Visitados</p>
                    </a>

                    @Html.Raw("</li>")

                    @if (Modulo == "Paciente/ProcurarMedico")
                    {
                        @Html.Raw("<li class=\"active\">");
                    }
                    else { @Html.Raw("<li>");
                    }
                    <a href="/Paciente/ProcurarMedico">
                        <i class="material-icons">search</i>
                        <p>Procurar Médico</p>
                    </a>
                    @Html.Raw("</li>")

                    @if (Modulo == "MedicoConsultorios/MedicosFavoritos")
                    {
                        @Html.Raw("<li class=\"active\">");
                    }
                    else { @Html.Raw("<li>");
                    }
                    <a href="/MedicoConsultorios/MedicosFavoritos">
                        <i class="material-icons">favorite</i>
                        <p>Favoritos</p>
                    </a>
                    @Html.Raw("</li>")



                </ul>

            </div>
        </div>
        <div class="main-panel">
            <nav class="navbar navbar-transparent navbar-absolute">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        @if (Modulo == "Paciente/Dashboard")
                        {
                            <a class="navbar-brand" href="#">Material Dashboard</a> }
                        @if (Modulo == "Paciente/Edit")
                        {
                            <a class="navbar-brand" href="#">Perfil</a> }
                        @if (Modulo == "MedicoConsultorios/MedicosVisitados")
                        {
                            <a class="navbar-brand" href="#">Médicos</a> }
                        @if (Modulo == "Paciente/ProcurarMedico")
                        {
                            <div class="collapse navbar-collapse">
                                <ul class="nav navbar-nav navbar-left">
                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                            <p>Mapas</p>
                                            <p class="hidden-lg hidden-md">Mapas</p>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a href="#">Teste 1</a></li>
                                            <li><a href="#">Teste 2</a></li>
                                            <li><a href="#">Teste 3</a></li>
                                            <li><a href="#">Teste 4</a></li>
                                            <li><a href="#">Teste 5</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        }
                        @if (Modulo == "MedicoConsultorios/MedicosFavoritos")
                        {
                            <a class="navbar-brand" href="#">Medicos</a> }
                        @if (Modulo == "Paciente/Confirma")
                        {
                            <a class="navbar-brand" href="#">Confirmação de Consulta</a> }
                        @if (Modulo == "Paciente/SelectDoc")
                        {
                            <a class="navbar-brand" href="#">Médicos do Consultório</a> }

                    </div>
                    <div class="collapse navbar-collapse">
                        <ul class="nav navbar-nav navbar-right">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="material-icons">notifications</i>
                                    <span class="notification"></span>
                                    <p class="hidden-lg hidden-md">Notifications</p>
                                </a>
                                <!--<ul class="dropdown-menu">
                                    <li><a href="#">Mike John responded to your email</a></li>
                                    <li><a href="#">You have 5 new tasks</a></li>
                                    <li><a href="#">You're now friend with Andrew</a></li>
                                    <li><a href="#">Another Notification</a></li>
                                    <li><a href="#">Another One</a></li>
                                </ul> -->
                            </li>
                            <li>
                                <a href="#pablo" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="material-icons">person</i>
                                    <p class="hidden-lg hidden-md">Profile</p>
                                </a>
                            </li>

                            <li>
                                <a href="~/UsuarioPaciente/Logoff" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="material-icons">exit_to_app</i>
                                    <p class="hidden-lg hidden-md">Sair</p>
                                </a>
                            </li>
                        </ul>


                    </div>
                </div>
            </nav>
            @if (Modulo == "Paciente/ProcurarMedico")
            {

                <div id="floating-panel" class="container-fluid">
                    <div class="row">
                        <div class="col-lg-3 col-md-3">
                            <div class="form-group  is-empty">
                                <input type="text" class="form-control" placeholder="Cidade" id="txtCidade">
                                <span class="material-input"></span>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3">
                            <div class="form-group  is-empty">
                                <input type="text" class="form-control" placeholder="Especialidade" id="txtEspecialidade">
                                <span class="material-input"></span>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3">
                            <div class="form-group  is-empty">
                                <input type="text" class="form-control" placeholder="Médico" id="txtMedico">
                                <span class="material-input"></span>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-2">
                            <div class="form-group  is-empty">
                                <select id="filtro" name="filtro" class="form-control">
                                    <option value="Medico">Médico</option>
                                    <option value="Consultorio">Consultório</option>
                                </select>
                                <span class="material-input"></span>
                            </div>
                        </div>
                        <div class="col-lg-1 col-md-1" style="margin-top:0px;">
                            <button id="buscaMed" type="submit" class="btn btn-white btn-round btn-just-icon">
                                <i class="material-icons">search</i><div class="ripple-container"></div>
                            </button>
                        </div>
                    </div>
                </div>

                <style>
                    #floating-panel {
                        position: absolute;
                        top: 7.5%;
                        left: 0.5%;
                        z-index: 100;
                        background-color: #eeeeee;
                        padding: 5px;
                        border: 0px solid #999;
                        border-radius: 20px;
                        text-align: center;
                        font-family: 'Roboto','sans-serif';
                        line-height: 30px;
                        padding-left: 10px;
                        width: 100%;
                        /*  height: 10%;*/
                        box-shadow: 4px 5px 10px 0px;
                    }

                    .form-group {
                        padding-bottom: 7px;
                        margin: 10px 0 0 0;
                    }

                    #buscaMed {
                        background: linear-gradient(60deg, #66bb6a, #43a047);
                    }

                        #buscaMed i {
                            color: white;
                        }
                </style>
            }
            @if (Modulo != "Paciente/ProcurarMedico") {

                @Html.Raw("<div class='content'>");
                @Html.Raw("<div class='container-fluid'>");
                
            }
            
            @RenderBody()

            @if (Modulo != "Paciente/ProcurarMedico")
            {
                @Html.Raw("</div>");
                @Html.Raw("</div>");
            }
            <footer class="footer">
                <div class="container-fluid">
                    <nav class="pull-left">

                    </nav>

                </div>
            </footer>
        </div>
    </div>
</body>
<!--   Core JS Files   -->
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/bootstrap")
@Scripts.Render("~/bundles/doctorScripts")

@if (Modulo == "Paciente/Confirma")
{
    @Scripts.Render("~/bundles/date");
}

<!--  Google Maps Plugin    -->
<script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"> </script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAU_tiKoaJXyYwl6CJqCS0V8z45pL2LE4w&libraries=places" async defer></script>

@if (Modulo == "MedicoConsultorios/MedicosVisitados")
{
    <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"> </script>

    <script>
        $(document).ready(function () {
            $('#medicos').DataTable({
                "searching": false,
                "info": false,
                "language": {
                    "url": "//cdn.datatables.net/plug-ins/1.10.15/i18n/Portuguese-Brasil.json"
                }
            });
        });


        $("button#favorita").on("click", function () {
            //  event.preventDefault();

            var dados = "id=" + $(this).attr("value");

            $.ajax({
                url: '/Avaliacaos/Favoritar',
                type: 'POST',
                data: dados,
                success: function (response) {
                    if (response && response.success) {
                        $(".inbox-body").replaceWith("<div class='inbox-body'> <div class=modal-header><button type=button class=close data-dismiss=modal id=closeModal>&times;</button> <h4>Detalhes Operação</h4></div> <div class=modal-body>Médico Favoritado.</div> </div>");
                    } else {
                        $(".inbox-body").replaceWith("<div class='inbox-body'> <div class=modal-header><button type=button class=close data-dismiss=modal id=closeModal>&times;</button> <h4>Detalhes Operação</h4></div> <div class=modal-body>Médico não favoritado.</div> </div>");
                    }

                    $("#myModal").modal('toggle');
                },
                error: function (err) {
                    $("#myModalContent").replaceWith("<div id=myModalContent> <div class=modal-header><button type=button class=close data-dismiss=modal id=closeModal>&times;</button> <h4>Detalhes Operação</h4></div> <div class=modal-body>Ocorreu algum erro.</div> </div>");
                    $("#myModal").modal('toggle');
                }
            });

        });

    </script>
    <style>
        table.dataTable thead th {
            border-bottom: 1px solid #aaaaaa;
        }
        table.dataTable.no-footer {
            border-bottom: 1px solid #aaaaaa;
        }
    </style>
}

@if (Modulo == "MedicoConsultorios/MedicosFavoritos")
{
    <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"> </script>

    <script>
        $(document).ready(function () {
            $('#medicos').DataTable({
                "searching": false,
                "info": false,
                "language": {
                    "url": "//cdn.datatables.net/plug-ins/1.10.15/i18n/Portuguese-Brasil.json"
                }
            });
        });
    </script>
    <style>
        table.dataTable thead th {
            border-bottom: 1px solid #aaaaaa;
        }
        table.dataTable.no-footer {
            border-bottom: 1px solid #aaaaaa;
        }
    </style>
}


@if (Modulo == "Paciente/Confirma") {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular-animate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular-aria.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-material/1.0.0-rc3/angular-material.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment-with-locales.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>

    <script type="text/javascript" src="../../Scripts/consulConfirma/beautifier.js"></script>
    <script type="text/javascript" src="../../Scripts/consulConfirma/angular-material-datetimepicker.js"></script>
    <script type="text/javascript" src="../../Scripts/consulConfirma/demo.js"></script>


}


@if (Modulo == "Paciente/ProcurarMedico")
{
    <script type="text/javascript" src="../../Scripts/GMap.js"></script>

    <script>
        $('#filtro').on('change', function () {

            if ($(this).val() == "Medico") {
                $('#txtMedico').attr("placeholder", "Médico");
            } else {
                $('#txtMedico').attr("placeholder", "Consultório");
            }
        });
    </script>

}
else {
    <script type="text/javascript">
        $(document).ready(function () {
            // Javascript method's body can be found in assets/js/demos.js
            demo.initDashboardPageCharts();
        });
    </script>
}

@if (Modulo == "Paciente/Confirma")
{
    <script>

        $(document).on('click', '#ChangeDate', function () {

            console.log('entrou');

            var dataCons = $("#Data_Cons").val();
            var dataId = $("#ID_MediConsu").val();

            $.ajax({
                type: 'POST',
                url: '../../Paciente/jSonConsult',
                data: { Data_Cons: dataCons, id: dataId },
                success: function (response) {

                    console.log(response.success);
                    console.log(response.consult);

                    if (response && response.success) {

                        var dateLoka = $("#Data_Cons").val().replace(/[/]/g, ' - ');

                        $('#conteuHorar').html('');
                        $('#conteuHorar').append('<div style="width:100%;display: inline-block;"><h3 style="text-align:center">' +
                             dateLoka + '</h3></div><div><h5 style="text-align:center">Horários Indisponíveis:</h5></div>');

                        for (var i = 0; i < response.consult.length; ++i) {

                            $('#conteuHorar').append('<div class="col-md-3"><button class="btn btn-primary" btn-block data-background-color="red">' +
                                response.consult[i].DtCons + '</button></div>');
                        }
                    }

                }
            });
        });


    </script>
}
@RenderSection("scripts", required: false)

</html>